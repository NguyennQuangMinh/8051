C51 COMPILER V9.60.7.0   MAIN                                                              09/07/2024 18:02:37 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\hoc\8051\Keil_C_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          
   2          
   3          #include<reg51.h>
   4          #include"ds1302.h"
   5          
   6          #define DIG P0
   7          sbit LSA=P2^2;
   8          sbit LSB=P2^3;
   9          sbit LSC=P2^4;
  10          
  11          unsigned char code DIG_CODE[10]={0x3f,0x06,0x5b,0x4f,0x66,0x6d,0x7d,0x07,0x7f,0x6f};
  12          unsigned char Num=0;
  13          unsigned int disp[8]={0x3f,0x3f,0x3f,0x3f,0x3f,0x3f,0x3f,0x3f};
  14          
  15          void LcdDisplay();
  16          void Timer0Configuration();
  17          
  18          
  19          
  20          void main()
  21          {
  22   1        Ds1302Init();
  23   1          Timer0Configuration();
  24   1        while(1)
  25   1        { 
  26   2          Ds1302ReadTime();
  27   2          disp[7] = DIG_CODE[TIME[0]&0x0f];
  28   2          disp[6] = DIG_CODE[TIME[0]>>4];
  29   2          disp[5] = 0X40;
  30   2          disp[4] = DIG_CODE[TIME[1]&0x0f];
  31   2          disp[3] = DIG_CODE[TIME[1]>>4];
  32   2          disp[2] = 0X40;
  33   2          disp[1] = DIG_CODE[TIME[2]&0x0f];
  34   2          disp[0] = DIG_CODE[TIME[2]>>4]; 
  35   2        }
  36   1        
  37   1      }
  38          
  39          
  40          
  41          void Timer0Configuration()
  42          {
  43   1        TMOD=0X02;
  44   1      
  45   1        TH0=0X9C; 
  46   1        TL0=0X9C; 
  47   1        ET0=1;
  48   1        EA=1;
  49   1        TR0=1;
  50   1      }
  51          
  52          void DigDisplay() interrupt 1
  53          {
  54   1      
  55   1        DIG=0; 
C51 COMPILER V9.60.7.0   MAIN                                                              09/07/2024 18:02:37 PAGE 2   

  56   1        switch(Num)  
  57   1        {
  58   2          case(7):
  59   2            LSA=0;LSB=0;LSC=0; break;
  60   2          case(6):
  61   2            LSA=1;LSB=0;LSC=0; break;
  62   2          case(5):
  63   2            LSA=0;LSB=1;LSC=0; break;
  64   2          case(4):
  65   2            LSA=1;LSB=1;LSC=0; break;
  66   2          case(3):
  67   2            LSA=0;LSB=0;LSC=1; break;
  68   2          case(2):
  69   2            LSA=1;LSB=0;LSC=1; break;
  70   2          case(1):
  71   2            LSA=0;LSB=1;LSC=1; break;
  72   2          case(0):
  73   2            LSA=1;LSB=1;LSC=1; break; 
  74   2        }
  75   1        DIG=disp[Num]; 
  76   1        Num++;
  77   1        if(Num>7)
  78   1          Num=0;
  79   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    239    ----
   CONSTANT SIZE    =     10    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     17    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
