C51 COMPILER V9.60.7.0   MAIN                                                              09/07/2024 17:53:50 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\hoc\8051\Keil_C_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          
   2          #include "reg52.h"
   3          
   4          
   5          #define GPIO_MOTOR P1
   6          //sbit F1 = P1^0;
   7          //sbit F2 = P1^1;
   8          //sbit F3 = P1^2;
   9          //sbit F4 = P1^3;
  10          
  11          sbit K1=P3^0;
  12          sbit K2=P3^1;
  13          sbit K3=P3^2;
  14          sbit K4=P3^3;
  15          
  16          unsigned char code FFW[8]={0xf1,0xf3,0xf2,0xf6,0xf4,0xfc,0xf8,0xf9}; 
  17          unsigned char code FFZ[8]={0xf9,0xf8,0xfc,0xf4,0xf6,0xf2,0xf3,0xf1}; 
  18          
  19          unsigned char Direction,Speed;
  20          void Delay(unsigned int t);
  21          void  Motor(); 
  22          
  23          void main(void) 
  24          { 
  25   1        unsigned char i;
  26   1        Speed=30;
  27   1        while(1)
  28   1        {
  29   2          if(K1==0)   
  30   2          {
  31   3            Delay(1); 
  32   3            if(K1==0)
  33   3            {
  34   4              Direction=1;
  35   4            }
  36   3            while((i<200)&&(K1==0)) 
  37   3            {
  38   4              Delay(1);
  39   4              i++;
  40   4            }
  41   3            i=0;
  42   3          }
  43   2          if(K2==0)   
  44   2          {
  45   3            Delay(1); 
  46   3            if(K2==0)
  47   3            {
  48   4              Direction=2;
  49   4            }
  50   3            while((i<200)&&(K2==0))  
  51   3            {
  52   4              Delay(1);
  53   4              i++;
  54   4            }
  55   3            i=0;
C51 COMPILER V9.60.7.0   MAIN                                                              09/07/2024 17:53:50 PAGE 2   

  56   3          }     
  57   2          if(K3==0)   
  58   2          {
  59   3            Delay(1); 
  60   3            if(K3==0)
  61   3            {
  62   4              Speed=13;
  63   4            }
  64   3            while((i<200)&&(K3==0))
  65   3            {
  66   4              Delay(1);
  67   4              i++;
  68   4            }
  69   3            i=0;
  70   3          }
  71   2          if(K4==0)   
  72   2          {
  73   3            Delay(1); 
  74   3            if(K4==0)
  75   3            {
  76   4              Speed=40;
  77   4            }
  78   3            while((i<200)&&(K4==0)) 
  79   3            {
  80   4              Delay(1);
  81   4              i++;
  82   4            }
  83   3            i=0;
  84   3          }   
  85   2          Motor();
  86   2        }
  87   1      }
  88          
  89          
  90          void  Motor()
  91          { 
  92   1        unsigned char i;
  93   1        for(i=0;i<8;i++)
  94   1        {
  95   2          if(Direction==1) 
  96   2            GPIO_MOTOR = FFW[i]&0x1f; 
  97   2          if(Direction==2) 
  98   2            GPIO_MOTOR = FFZ[i]&0x1f;
  99   2          Delay(Speed);   
 100   2        }                   
 101   1      }
 102          
 103          void Delay(unsigned int t)
 104          {                           
 105   1        unsigned int k;
 106   1        while(t--)
 107   1        {
 108   2          for(k=0; k<80; k++)
 109   2          { }
 110   2        }
 111   1      }
 112          
 113          
 114          


MODULE INFORMATION:   STATIC OVERLAYABLE
C51 COMPILER V9.60.7.0   MAIN                                                              09/07/2024 17:53:50 PAGE 3   

   CODE SIZE        =    221    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      2       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
