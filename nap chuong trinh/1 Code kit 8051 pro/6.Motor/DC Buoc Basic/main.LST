C51 COMPILER V9.01   MAIN                                                                  08/16/2013 16:38:45 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /*******************************************************************************
   2          * 实 验 名     : 步进电机实验
   3          * 使用的IO       : 电机用P1.0/P1.1/P1.2/P1.3
   4          * 实验效果       : 
   5          * 注    意     ：由于P3.2口跟红外线共用，所以做按键实验时为了不让红外线影响实验
   6          *效果，最好把红外线先取下来。
   7          *******************************************************************************/ 
   8          #include "reg52.h"
   9          
  10          //电机IO
  11          #define GPIO_MOTOR P1
  12          //sbit F1 = P1^0;
  13          //sbit F2 = P1^1;
  14          //sbit F3 = P1^2;
  15          //sbit F4 = P1^3;
  16          //按键IO
  17          sbit K1=P3^0;
  18          sbit K2=P3^1;
  19          sbit K3=P3^2;
  20          sbit K4=P3^3;
  21          
  22          unsigned char code FFW[8]={0xf1,0xf3,0xf2,0xf6,0xf4,0xfc,0xf8,0xf9}; //反转顺序
  23          
  24          void Delay(unsigned int t);
  25          void  Motor(); 
  26          
  27          /*******************************************************************************
  28          * 函 数 名         : main
  29          * 函数功能       : 主函数
  30          * 输    入         : 无
  31          * 输    出         : 无
  32          *******************************************************************************/
  33          
  34          void main(void) 
  35          { 
  36   1        while(1)
  37   1        {
  38   2          Motor();
  39   2        }
  40   1      }
  41          /*******************************************************************************
  42          * 函 数 名         : Motor
  43          * 函数功能       : 电机旋转函数
  44          * 输    入         : 无
  45          * 输    出         : 无
  46          *******************************************************************************/
  47          
  48          void  Motor()
  49          { 
  50   1        unsigned char i;
  51   1        for(i=0;i<8;i++)
  52   1        { 
  53   2          GPIO_MOTOR = FFW[i]&0x1f;  //取数据
  54   2          Delay(30);  //调节转速  
  55   2        }                   
C51 COMPILER V9.01   MAIN                                                                  08/16/2013 16:38:45 PAGE 2   

  56   1      }
  57          /*******************************************************************************
  58          * 函 数 名         : Delay
  59          * 函数功能       : 延时
  60          * 输    入         : t
  61          * 输    出         : 无
  62          *******************************************************************************/
  63          void Delay(unsigned int t)
  64          {                           
  65   1        unsigned int k;
  66   1        while(t--)
  67   1        {
  68   2          for(k=0; k<80; k++)
  69   2          { }
  70   2        }
  71   1      }
  72          
  73          
  74          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     65    ----
   CONSTANT SIZE    =      8    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
