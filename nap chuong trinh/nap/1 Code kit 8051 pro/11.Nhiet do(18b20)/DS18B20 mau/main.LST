C51 COMPILER V9.01   MAIN                                                                  08/29/2013 14:31:25 PAGE 1   


C51 COMPILER V9.01, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE main.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          /*******************************************************************************
   2          *  µ—È√˚         :Œ¬∂»œ‘ æ µ—È
   3          *  π”√µƒIO       : 
   4          *  µ—È–ßπ˚       :1602œ‘ æŒ¬∂»
   5          * ◊¢“‚           £∫
   6          *******************************************************************************/
   7          
   8          #include<reg51.h>
   9          #include"lcd.h"
  10          #include"temp.h"
  11          void LcdDisplay(int);
  12          /*******************************************************************************
  13          * ∫Ø ˝√˚         : main
  14          * ∫Ø ˝π¶ƒ‹       : ÷˜∫Ø ˝
  15          *  ‰»Î           : Œﬁ
  16          *  ‰≥ˆ           : Œﬁ
  17          *******************************************************************************/
  18          
  19          void main()
  20          {
  21   1        LcdInit();       //≥ı ºªØLCD1602
  22   1        LcdWriteCom(0x88);  //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  23   1        LcdWriteData('C'); 
  24   1        while(1)
  25   1        {
  26   2          LcdDisplay(Ds18b20ReadTemp());
  27   2      //    Delay1ms(1000);//1s÷”À¢“ª¥Œ
  28   2        }
  29   1      }
  30          
  31          /*******************************************************************************
  32          * ∫Ø ˝√˚         : LcdDisplay()
  33          * ∫Ø ˝π¶ƒ‹       : LCDœ‘ æ∂¡»°µΩµƒŒ¬∂»
  34          *  ‰»Î           : v
  35          *  ‰≥ˆ           : Œﬁ
  36          *******************************************************************************/
  37          
  38          void LcdDisplay(int temp)    //lcdœ‘ æ
  39          {
  40   1          
  41   1          unsigned char datas[] = {0, 0, 0, 0, 0}; //∂®“Â ˝◊È
  42   1        float tp;  
  43   1        if(temp< 0)       //µ±Œ¬∂»÷µŒ™∏∫ ˝
  44   1          {
  45   2            LcdWriteCom(0x80);    //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  46   2            LcdWriteData('-');      //œ‘ æ∏∫
  47   2          //“ÚŒ™∂¡»°µƒŒ¬∂» « µº Œ¬∂»µƒ≤π¬Î£¨À˘“‘ºı1£¨‘Ÿ»°∑¥«Û≥ˆ‘≠¬Î
  48   2          temp=temp-1;
  49   2          temp=~temp;
  50   2          tp=temp;
  51   2          temp=tp*0.0625*100+0.5; 
  52   2          //¡Ù¡Ω∏ˆ–° ˝µ„æÕ*100£¨+0.5 «Àƒ…·ŒÂ»Î£¨“ÚŒ™C”Ô—‘∏°µ„ ˝◊™ªªŒ™’˚–Õµƒ ±∫Ú∞—–° ˝µ„
  53   2          //∫Û√Êµƒ ˝◊‘∂Ø»•µÙ£¨≤ªπ‹ «∑Ò¥Û”⁄0.5£¨∂¯+0.5÷Æ∫Û¥Û”⁄0.5µƒæÕ «Ω¯1¡À£¨–°”⁄0.5µƒæÕ
  54   2          //À„”…œ0.5£¨ªπ «‘⁄–° ˝µ„∫Û√Ê°£
  55   2       
C51 COMPILER V9.01   MAIN                                                                  08/29/2013 14:31:25 PAGE 2   

  56   2          }
  57   1        else
  58   1          {     
  59   2            LcdWriteCom(0x80);    //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  60   2            LcdWriteData('+');    //œ‘ æ’˝
  61   2          tp=temp;//“ÚŒ™ ˝æ›¥¶¿Ì”––° ˝µ„À˘“‘Ω´Œ¬∂»∏≥∏¯“ª∏ˆ∏°µ„–Õ±‰¡ø
  62   2          //»Áπ˚Œ¬∂» «’˝µƒƒ«√¥£¨ƒ«√¥’˝ ˝µƒ‘≠¬ÎæÕ «≤π¬ÎÀ¸±æ…Ì
  63   2          temp=tp*0.0625*100+0.5; 
  64   2          //¡Ù¡Ω∏ˆ–° ˝µ„æÕ*100£¨+0.5 «Àƒ…·ŒÂ»Î£¨“ÚŒ™C”Ô—‘∏°µ„ ˝◊™ªªŒ™’˚–Õµƒ ±∫Ú∞—–° ˝µ„
  65   2          //∫Û√Êµƒ ˝◊‘∂Ø»•µÙ£¨≤ªπ‹ «∑Ò¥Û”⁄0.5£¨∂¯+0.5÷Æ∫Û¥Û”⁄0.5µƒæÕ «Ω¯1¡À£¨–°”⁄0.5µƒæÕ
  66   2          //À„º”…œ0.5£¨ªπ «‘⁄–° ˝µ„∫Û√Ê°£
  67   2        }
  68   1        datas[0] = temp / 10000;
  69   1        datas[1] = temp % 10000 / 1000;
  70   1        datas[2] = temp % 1000 / 100;
  71   1        datas[3] = temp % 100 / 10;
  72   1        datas[4] = temp % 10;
  73   1       
  74   1        LcdWriteCom(0x82);      //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  75   1        LcdWriteData('0'+datas[0]); //∞ŸŒª 
  76   1      
  77   1        
  78   1        LcdWriteCom(0x83);     //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  79   1        LcdWriteData('0'+datas[1]); // ÆŒª
  80   1      
  81   1        LcdWriteCom(0x84);    //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  82   1        LcdWriteData('0'+datas[2]); //∏ˆŒª 
  83   1      
  84   1        LcdWriteCom(0x85);    //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  85   1        LcdWriteData('.');    //œ‘ æ °Æ.°Ø
  86   1      
  87   1        LcdWriteCom(0x86);     //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  88   1        LcdWriteData('0'+datas[3]); //œ‘ æ–° ˝µ„  
  89   1      
  90   1        LcdWriteCom(0x87);     //–¥µÿ÷∑ 80±Ì æ≥ı ºµÿ÷∑
  91   1        LcdWriteData('0'+datas[4]); //œ‘ æ–° ˝µ„  
  92   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    318    ----
   CONSTANT SIZE    =      5    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      11
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
